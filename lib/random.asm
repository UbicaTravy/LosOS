; библиотека для генерации случайных чисел
; использует время системы как источник случайности

; генерация случайного числа в диапазоне
; вход: al - максимальное число (включительно)
; выход: al - случайное число от 0 до al
random_range:
    push bx
    push dx
    
    ; получаем время в ticks
    mov ah, 0x00
    int 0x1A
    
    ; берем младший байт
    mov ax, dx
    
    ; делим на максимальное число
    mov bl, al  ; сохраняем максимальное число
    mov al, dl  ; берем младший байт времени
    xor ah, ah  ; обнуляем старший байт
    div bl      ; делим al на bl, остаток в ah
    
    ; возвращаем остаток от деления
    mov al, ah
    
    pop dx
    pop bx
    ret

; генерация случайного числа от 1 до указанного
; вход: al - максимальное число (включительно)
; выход: al - случайное число от 1 до al
random_range_1:
    push bx
    
    ; сохраняем максимальное число
    mov bl, al
    
    ; генерируем число от 0 до max-1
    dec bl
    mov al, bl
    call random_range
    
    ; добавляем 1 для получения диапазона 1-max
    inc al
    
    pop bx
    ret

; генерация случайного байта (0-255)
; выход: al - случайный байт
random_byte:
    push dx
    
    ; получаем время в ticks
    mov ah, 0x00
    int 0x1A
    
    ; возвращаем младший байт
    mov al, dl
    
    pop dx
    ret

; генерация случайного слова (0-65535)
; выход: ax - случайное слово
random_word:
    push dx
    
    ; получаем время в ticks
    mov ah, 0x00
    int 0x1A
    
    ; возвращаем полное слово
    mov ax, dx
    
    pop dx
    ret 